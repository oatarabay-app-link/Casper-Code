<!DOCTYPE html>
<html>
<head>
    <title>Test External Login</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .button { padding: 10px 20px; margin: 10px; background: #007bff; color: white; border: none; cursor: pointer; }
        .button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <h1>Test External Login</h1>
    
    <button class="button" onclick="testGoogleLogin()">
        Test Google Login
    </button>
    
    <button class="button" onclick="testExternalLoginStatus()">
        Test Login Status
    </button>
    
    <button class="button" onclick="testLogout()">
        Test Logout
    </button>
    
    <div id="result" style="margin-top: 20px; padding: 10px; border: 1px solid #ccc;"></div>
<script>
    const API_BASE = 'http://localhost:5000'; // <-- Your backend port

    function testGoogleLogin() {
        window.location.href = `${API_BASE}/api/Auth/external-login?provider=Google&returnUrl=${encodeURIComponent(window.location.origin + '/test-success.html')}`;
    }

    async function testExternalLoginStatus() {
        try {
            const response = await fetch(`${API_BASE}/api/Auth/external-login-status`, {
                credentials: 'include'
            });
            const result = await response.json();
            document.getElementById('result').innerHTML = '<pre>' + JSON.stringify(result, null, 2) + '</pre>';
        } catch (error) {
            document.getElementById('result').innerHTML = 'Error: ' + error.message;
        }
    }

    async function testLogout() {
        try {
            const response = await fetch(`${API_BASE}/api/Auth/logout`, {
                method: 'POST',
                credentials: 'include'
            });
            const result = await response.json();
            document.getElementById('result').innerHTML = 'Logout: ' + JSON.stringify(result, null, 2);
        } catch (error) {
            document.getElementById('result').innerHTML = 'Error: ' + error.message;
        }
    }
</script>

</body>
</html>